:root{
  --sage:#c7d4c1; --cream:#fbf7ef; --terra:#c07a59; --ink:#1c1c1c;
  --shadow:rgba(0,0,0,.12); --cardBorder:rgba(192,122,89,.35);

  --cardSize:clamp(78px,18vw,150px);
  --gap:clamp(.22rem,1vw,.55rem);

  /* wood tones */
  --wood1:#8a5a3a;
  --wood2:#6f452d;
  --wood3:#9a6a47;
  --tile1:#d2ad7f;
  --tile2:#c79c6d;
  --etch:rgba(0,0,0,.18);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:linear-gradient(var(--cream),var(--sage));
  color:var(--ink);
}
.hidden{display:none!important}

/* TOP BAR */
.topbar{display:flex;justify-content:space-between;align-items:flex-start;padding:12px;gap:12px}
.brand{display:flex;gap:14px;align-items:flex-start}
.title{margin:0;font-size:1.6rem}
.subtitle{margin:.2rem 0 0;opacity:.85}
.ravenHero{width:96px;border-radius:16px;box-shadow:0 8px 20px var(--shadow)}
.topControls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}

/* PANELS */
.panel{
  max-width:980px;
  margin:12px auto;
  background:rgba(255,255,255,.6);
  padding:18px;
  border-radius:28px;
  box-shadow:0 10px 26px var(--shadow);
}
.grid2{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.field{background:rgba(255,255,255,.55);padding:12px;border-radius:18px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.label{font-weight:600;margin-bottom:6px;display:block}
.select{width:100%;padding:.6rem;border-radius:12px;border:1px solid var(--cardBorder);background:rgba(255,255,255,.85)}

/* BUTTONS */
.btn,.pill{
  padding:.6rem .9rem;
  border-radius:999px;
  border:1px solid var(--cardBorder);
  background:#fff;
  cursor:pointer;
  box-shadow:0 6px 16px var(--shadow);
  display:inline-flex;
  align-items:center;
  gap:.4rem;
}
.btn.primary{background:rgba(192,122,89,.2)}
.btn.ghost{background:rgba(255,255,255,.6)}
.pill.active{box-shadow:0 6px 16px var(--shadow),0 0 0 3px rgba(192,122,89,.22)}

.toggleBtn[aria-pressed="false"]{opacity:.55;filter:grayscale(30%)}
.toggleBtn[aria-pressed="true"]{box-shadow:0 6px 16px var(--shadow),0 0 0 3px rgba(192,122,89,.18)}

/* BOARD — WOOD FRAME + ETCHED GRID */
.board{
  display:grid;
  grid-template-columns:repeat(3,var(--cardSize));
  gap:var(--gap);
  justify-content:center;
  margin:0 auto;

  padding:calc(var(--gap) * 1.6);
  border-radius:26px;

  /* wood frame */
  background:
    /* etched grid lines aligned to tile+gap rhythm */
    linear-gradient(90deg,
      var(--etch) 0 2px,
      transparent 2px calc(var(--cardSize) + var(--gap))
    ),
    linear-gradient(
      var(--etch) 0 2px,
      transparent 2px calc(var(--cardSize) + var(--gap))
    ),
    /* subtle wood grain */
    repeating-linear-gradient(25deg,
      rgba(255,255,255,.07) 0 6px,
      rgba(0,0,0,.06) 6px 12px
    ),
    linear-gradient(135deg, var(--wood3), var(--wood1) 35%, var(--wood2));

  background-size:
    calc(var(--cardSize) + var(--gap)) 100%,
    100% calc(var(--cardSize) + var(--gap)),
    auto,
    auto;

  background-repeat:repeat,repeat,repeat,no-repeat;

  box-shadow:
    0 18px 42px rgba(0,0,0,.18),
    inset 0 0 0 2px rgba(255,255,255,.22),
    inset 0 10px 18px rgba(255,255,255,.12),
    inset 0 -12px 18px rgba(0,0,0,.18);
}

/* FLIP CARD */
.card{
  width:var(--cardSize);
  height:var(--cardSize);
  perspective:1000px;
}
.card-inner{
  width:100%;
  height:100%;
  transition:transform .45s ease;
  transform-style:preserve-3d;
}
.card.flipped .card-inner{transform:rotateY(180deg)}

/* TILE FACE — bevel + highlight */
.face{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;

  border-radius:18px;
  backface-visibility:hidden;

  /* wood tile */
  background:
    /* bevel highlight */
    linear-gradient(145deg,
      rgba(255,255,255,.36),
      rgba(255,255,255,0) 35%
    ),
    linear-gradient(325deg,
      rgba(0,0,0,.22),
      rgba(0,0,0,0) 45%
    ),
    linear-gradient(135deg, var(--tile1), var(--tile2));

  box-shadow:
    0 8px 16px rgba(0,0,0,.14),
    inset 0 1px 0 rgba(255,255,255,.45),
    inset 0 -3px 7px rgba(0,0,0,.20);

  border:1px solid rgba(0,0,0,.08);
}

.back{transform:rotateY(180deg)}

/* Seal on front = “burned into wood” */
.card .card-inner .face:first-child img{
  width:72%;
  opacity:.88;
  filter:sepia(1) saturate(1.6) brightness(.55) contrast(1.35);
  mix-blend-mode:multiply;
}

/* Icons on back stay crisp */
.card .card-inner .face.back img{
  width:70%;
  filter:none;
  mix-blend-mode:normal;
  opacity:1;
}

/* Gentle tap/hover feedback */
.card:focus-within .face,
.card:hover .face{
  transform:translateY(-1px);
}

/* OVERLAY */
.overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.35);
  z-index:9999;
}
.overlay.hidden{display:none}
.overlayCard{
  background:#fff;
  padding:18px;
  border-radius:24px;
  text-align:center;
  width:min(420px,90vw);
  box-shadow:0 18px 40px rgba(0,0,0,.18);
}
.overlayBtns{display:flex;gap:10px;justify-content:center;margin-top:12px}

.statusWrap{display:flex;justify-content:center;margin-bottom:10px}
.status{text-align:center}
.sr-only{position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap}

@media (max-width:540px){
  .grid2{grid-template-columns:1fr}
  .ravenHero{display:none}
}
