:root{
  --sage:#c7d4c1; --cream:#fbf7ef; --terra:#c07a59; --ink:#1c1c1c;
  --shadow:rgba(0,0,0,.12); --cardBorder:rgba(192,122,89,.35);

  --cardSize:clamp(78px,18vw,150px);
  --gap:clamp(.35rem,1.2vw,.65rem);

  /* wood tones (frame) */
  --woodA:#7a4a2f;
  --woodB:#5f381f;
  --woodC:#8a5a3a;

  /* tile wood */
  --tileA:#d7b98b;
  --tileB:#caa171;

  --etch:rgba(0,0,0,.22);
}

*{box-sizing:border-box}
body{margin:0;font-family:system-ui,sans-serif;background:linear-gradient(var(--cream),var(--sage));color:var(--ink)}
.hidden{display:none!important}

/* TOP BAR */
.topbar{display:flex;justify-content:space-between;align-items:flex-start;padding:12px;gap:12px}
.brand{display:flex;gap:14px;align-items:flex-start}
.title{margin:0;font-size:1.6rem}
.subtitle{margin:.2rem 0 0;opacity:.85}
.ravenHero{width:96px;border-radius:16px;box-shadow:0 8px 20px var(--shadow)}
.topControls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}

/* PANELS */
.panel{max-width:980px;margin:12px auto;background:rgba(255,255,255,.6);padding:18px;border-radius:28px;box-shadow:0 10px 26px var(--shadow)}
.grid2{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.field{background:rgba(255,255,255,.55);padding:12px;border-radius:18px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.label{font-weight:600;margin-bottom:6px;display:block}
.select{width:100%;padding:.6rem;border-radius:12px;border:1px solid var(--cardBorder);background:rgba(255,255,255,.85)}

/* BUTTONS */
.btn,.pill{padding:.6rem .9rem;border-radius:999px;border:1px solid var(--cardBorder);background:#fff;cursor:pointer;box-shadow:0 6px 16px var(--shadow);display:inline-flex;align-items:center;gap:.4rem}
.btn.primary{background:rgba(192,122,89,.2)}
.btn.ghost{background:rgba(255,255,255,.6)}
.pill.active{box-shadow:0 6px 16px var(--shadow),0 0 0 3px rgba(192,122,89,.22)}
.toggleBtn[aria-pressed="false"]{opacity:.55;filter:grayscale(30%)}
.toggleBtn[aria-pressed="true"]{box-shadow:0 6px 16px var(--shadow),0 0 0 3px rgba(192,122,89,.18)}

/* BOARD — make it only as big as the 3x3 grid (no giant background) */
.board{
  display:grid;
  grid-template-columns:repeat(3,var(--cardSize));
  gap:var(--gap);
  justify-content:center;
  width:fit-content;
  margin:0 auto;

  /* wood frame padding around tiles */
  padding:calc(var(--gap) * 1.2);
  border-radius:26px;

  /* realistic-ish wood grain (NO diagonal stripes) */
  background:
    /* subtle grain lines */
    repeating-linear-gradient(90deg,
      rgba(255,255,255,.06) 0 2px,
      rgba(0,0,0,.05) 2px 4px
    ),
    /* soft knots */
    radial-gradient(circle at 20% 30%, rgba(0,0,0,.10), transparent 45%),
    radial-gradient(circle at 75% 60%, rgba(0,0,0,.08), transparent 55%),
    /* base wood */
    linear-gradient(180deg, var(--woodC), var(--woodA) 45%, var(--woodB));

  box-shadow:
    0 18px 42px rgba(0,0,0,.18),
    inset 0 0 0 2px rgba(255,255,255,.18),
    inset 0 10px 18px rgba(255,255,255,.10),
    inset 0 -12px 18px rgba(0,0,0,.16);
  position:relative;
}

/* ETCHED GRID LINES (between tiles only) */
.board::after{
  content:"";
  position:absolute;
  inset:calc(var(--gap) * 1.2);
  border-radius:20px;
  pointer-events:none;

  /* draw lines at the gaps */
  background:
    /* vertical lines */
    linear-gradient(to right,
      transparent 0 calc(var(--cardSize) + (var(--gap) / 2)),
      var(--etch) calc(var(--cardSize) + (var(--gap) / 2)) calc(var(--cardSize) + (var(--gap) / 2) + 2px),
      transparent calc(var(--cardSize) + (var(--gap) / 2) + 2px) calc(2*var(--cardSize) + (3*var(--gap) / 2)),
      var(--etch) calc(2*var(--cardSize) + (3*var(--gap) / 2)) calc(2*var(--cardSize) + (3*var(--gap) / 2) + 2px),
      transparent calc(2*var(--cardSize) + (3*var(--gap) / 2) + 2px) 100%
    ),
    /* horizontal lines */
    linear-gradient(to bottom,
      transparent 0 calc(var(--cardSize) + (var(--gap) / 2)),
      var(--etch) calc(var(--cardSize) + (var(--gap) / 2)) calc(var(--cardSize) + (var(--gap) / 2) + 2px),
      transparent calc(var(--cardSize) + (var(--gap) / 2) + 2px) calc(2*var(--cardSize) + (3*var(--gap) / 2)),
      var(--etch) calc(2*var(--cardSize) + (3*var(--gap) / 2)) calc(2*var(--cardSize) + (3*var(--gap) / 2) + 2px),
      transparent calc(2*var(--cardSize) + (3*var(--gap) / 2) + 2px) 100%
    );
  opacity:.55;
  filter:blur(.15px);
}

/* FLIP CARD */
.card{width:var(--cardSize);height:var(--cardSize);perspective:1000px}
.card-inner{width:100%;height:100%;transition:transform .45s ease;transform-style:preserve-3d}
.card.flipped .card-inner{transform:rotateY(180deg)}

/* TILE FACE — bevel highlight */
.face{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  border-radius:18px; backface-visibility:hidden;

  background:
    /* top-left highlight */
    linear-gradient(145deg, rgba(255,255,255,.34), rgba(255,255,255,0) 38%),
    /* bottom-right shade */
    linear-gradient(325deg, rgba(0,0,0,.18), rgba(0,0,0,0) 45%),
    /* tile wood */
    linear-gradient(180deg, var(--tileA), var(--tileB));

  box-shadow:
    0 8px 16px rgba(0,0,0,.14),
    inset 0 1px 0 rgba(255,255,255,.42),
    inset 0 -4px 9px rgba(0,0,0,.18);

  border:1px solid rgba(0,0,0,.08);
}
.back{transform:rotateY(180deg)}

/* Seal = “burned into wood” */
.card .card-inner .face:first-child img{
  width:72%;
  opacity:.92;
  filter:sepia(1) saturate(1.5) brightness(.48) contrast(1.4);
  mix-blend-mode:multiply;
}

/* Back icons crisp */
.card .card-inner .face.back img{
  width:70%;
  filter:none;
  mix-blend-mode:normal;
  opacity:1;
}

/* OVERLAY */
.overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.35);z-index:9999}
.overlay.hidden{display:none}
.overlayCard{background:#fff;padding:18px;border-radius:24px;text-align:center;width:min(420px,90vw);box-shadow:0 18px 40px rgba(0,0,0,.18)}
.overlayBtns{display:flex;gap:10px;justify-content:center;margin-top:12px}

.statusWrap{display:flex;justify-content:center;margin-bottom:10px}
.status{text-align:center}
.sr-only{position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap}

@media (max-width:540px){.grid2{grid-template-columns:1fr}.ravenHero{display:none}}
